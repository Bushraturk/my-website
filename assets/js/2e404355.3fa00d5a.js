"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[1657],{2257:(e,n,i)=>{i.d(n,{A:()=>r});const r="data:image/png;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDAwIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjQwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMzMzMiPlBsYWNlaG9sZGVyOiBhY3Rpb24tY29tbXVuaWNhdGlvbi5wbmc8L3RleHQ+PC9zdmc+"},2380:(e,n,i)=>{i.d(n,{A:()=>r});const r="data:image/png;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4MDAiIGhlaWdodD0iNDAwIj48cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2YwZjBmMCIvPjx0ZXh0IHg9IjQwMCIgeT0iMjAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMzMzMiPlBsYWNlaG9sZGVyOiBzZXJ2aWNlLWNvbW11bmljYXRpb24ucG5nPC90ZXh0Pjwvc3ZnPg=="},4075:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"ros2/week3","title":"Week 3 - Advanced ROS 2 Concepts","description":"Navigation","source":"@site/docs/ros2/week3.md","sourceDirName":"ros2","slug":"/ros2/week3","permalink":"/ros2/week3","draft":false,"unlisted":false,"editUrl":"https://github.com/Bushraturk/Physical-AI-Book/edit/main/docs/ros2/week3.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Week 3 - Advanced ROS 2 Concepts","sidebar_position":3},"sidebar":"textbookSidebar","previous":{"title":"Week 1-2 - ROS 2 Architecture and Fundamentals","permalink":"/ros2/week1-2"},"next":{"title":"Lab Exercise 1 - Basic Node Communication","permalink":"/ros2/lab-exercises/lab1"}}');var t=i(4848),s=i(8453);const a={title:"Week 3 - Advanced ROS 2 Concepts",sidebar_position:3},l="Week 3: Advanced ROS 2 Concepts",o={},c=[{value:"Navigation",id:"navigation",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Services in ROS 2",id:"services-in-ros-2",level:2},{value:"Creating a Service",id:"creating-a-service",level:3},{value:"Service Server Implementation",id:"service-server-implementation",level:3},{value:"Service Client Implementation",id:"service-client-implementation",level:3},{value:"Actions in ROS 2",id:"actions-in-ros-2",level:2},{value:"Action Structure",id:"action-structure",level:3},{value:"Creating an Action",id:"creating-an-action",level:3},{value:"Parameters in ROS 2",id:"parameters-in-ros-2",level:2},{value:"Launch Files",id:"launch-files",level:2},{value:"Creating a Launch File",id:"creating-a-launch-file",level:3},{value:"Debugging ROS 2 Systems",id:"debugging-ros-2-systems",level:2},{value:"ROS 2 Command Line Tools",id:"ros-2-command-line-tools",level:3},{value:"Visualization Tools",id:"visualization-tools",level:3},{value:"Practical Application",id:"practical-application",level:2},{value:"Lab Exercise Preview",id:"lab-exercise-preview",level:2},{value:"Summary",id:"summary",level:2},{value:"Navigation",id:"navigation-1",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"week-3-advanced-ros-2-concepts",children:"Week 3: Advanced ROS 2 Concepts"})}),"\n",(0,t.jsx)(n.h2,{id:"navigation",children:"Navigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/ros2/week1-2",children:"Week 1-2"})," | ",(0,t.jsx)(n.a,{href:"/ros2/conclusion",children:"Module Conclusion"})," | ",(0,t.jsx)(n.a,{href:"/ros2/intro",children:"Module Home"})]}),"\n",(0,t.jsx)(n.p,{children:"In this final week of the ROS 2 module, we'll explore advanced communication patterns, services, actions, and parameter management that are essential for building complex robotic systems."}),"\n",(0,t.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,t.jsx)(n.p,{children:"By the end of this week, you will be able to:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implement service-server communication patterns in ROS 2"}),"\n",(0,t.jsx)(n.li,{children:"Create and use actions for goal-oriented tasks with feedback"}),"\n",(0,t.jsx)(n.li,{children:"Define and implement custom service and action interfaces"}),"\n",(0,t.jsx)(n.li,{children:"Manage parameters in ROS 2 systems with runtime configuration"}),"\n",(0,t.jsx)(n.li,{children:"Create and configure launch files to coordinate multiple nodes"}),"\n",(0,t.jsx)(n.li,{children:"Debug complex ROS 2 systems using command-line tools"}),"\n",(0,t.jsx)(n.li,{children:"Choose appropriate communication patterns (topics, services, actions) for different use cases"}),"\n",(0,t.jsx)(n.li,{children:"Integrate multiple ROS 2 concepts in a complete robotic system"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"services-in-ros-2",children:"Services in ROS 2"}),"\n",(0,t.jsx)(n.p,{children:"Services provide synchronous request/response communication between nodes. Unlike topics which are asynchronous, services block until a response is received."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Service Communication Pattern",src:i(2380).A+"",width:"800",height:"400"})}),"\n",(0,t.jsx)(n.p,{children:"The service communication pattern involves a client making a request to a server, which processes the request and returns a response. This is different from the publisher-subscriber pattern which is asynchronous."}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-service",children:"Creating a Service"}),"\n",(0,t.jsxs)(n.p,{children:["First, define the service interface in a ",(0,t.jsx)(n.code,{children:".srv"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# AddTwoInts.srv\r\nint64 a\r\nint64 b\r\n---\r\nint64 sum\n"})}),"\n",(0,t.jsx)(n.p,{children:"This service definition creates a service that accepts two integers (a and b) and returns their sum."}),"\n",(0,t.jsx)(n.h3,{id:"service-server-implementation",children:"Service Server Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\n\r\nclass MinimalService(Node):\r\n    """\r\n    A minimal service server node that provides an AddTwoInts service.\r\n    This demonstrates how to create a service server in ROS 2.\r\n    """\r\n\r\n    def __init__(self):\r\n        # Initialize the node with the name \'minimal_service\'\r\n        super().__init__(\'minimal_service\')\r\n\r\n        # Create a service that will handle requests to the \'add_two_ints\' service\r\n        # The callback method add_two_ints_callback will be called for each request\r\n        self.srv = self.create_service(\r\n            AddTwoInts,\r\n            \'add_two_ints\',\r\n            self.add_two_ints_callback\r\n        )\r\n\r\n    def add_two_ints_callback(self, request, response):\r\n        """\r\n        Callback method that is called when a service request is received.\r\n        :param request: The request message containing the two integers to add\r\n        :param response: The response message that will be returned to the client\r\n        :return: The response message with the sum\r\n        """\r\n        # Calculate the sum of the two integers in the request\r\n        response.sum = request.a + request.b\r\n\r\n        # Log the incoming request for debugging purposes\r\n        self.get_logger().info(f\'Incoming request\\na={request.a}, b={request.b}\')\r\n\r\n        # Return the response\r\n        return response\r\n\r\n\r\ndef main(args=None):\r\n    """Main function to initialize and run the service server node."""\r\n    # Initialize the ROS 2 client library\r\n    rclpy.init(args=args)\r\n\r\n    # Create an instance of the MinimalService class\r\n    minimal_service = MinimalService()\r\n\r\n    # Keep the node running until it\'s shut down\r\n    rclpy.spin(minimal_service)\r\n\r\n    # Clean up when the node is shut down\r\n    minimal_service.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"service-client-implementation",children:"Service Client Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import sys\r\nimport rclpy\r\nfrom rclpy.node import Node\r\nfrom example_interfaces.srv import AddTwoInts\r\n\r\n\r\nclass MinimalClient(Node):\r\n    """\r\n    A minimal service client node that calls the AddTwoInts service.\r\n    This demonstrates how to create a service client in ROS 2.\r\n    """\r\n\r\n    def __init__(self):\r\n        # Initialize the node with the name \'minimal_client\'\r\n        super().__init__(\'minimal_client\')\r\n\r\n        # Create a client for the \'add_two_ints\' service\r\n        self.cli = self.create_client(AddTwoInts, \'add_two_ints\')\r\n\r\n        # Wait for the service to become available\r\n        while not self.cli.wait_for_service(timeout_sec=1.0):\r\n            self.get_logger().info(\'Service not available, waiting again...\')\r\n\r\n        # Create a request object to hold the parameters for the service call\r\n        self.req = AddTwoInts.Request()\r\n\r\n    def send_request(self, a, b):\r\n        """\r\n        Send a request to the service with two integers.\r\n        :param a: First integer\r\n        :param b: Second integer\r\n        :return: The result of the service call\r\n        """\r\n        # Set the values in the request\r\n        self.req.a = a\r\n        self.req.b = b\r\n\r\n        # Call the service asynchronously and return a future\r\n        future = self.cli.call_async(self.req)\r\n\r\n        # Wait for the result\r\n        rclpy.spin_until_future_complete(self, future)\r\n\r\n        # Return the result\r\n        return future.result()\r\n\r\n\r\ndef main(args=None):\r\n    """Main function to initialize and run the service client node."""\r\n    # Initialize the ROS 2 client library\r\n    rclpy.init(args=args)\r\n\r\n    # Create an instance of the MinimalClient class\r\n    minimal_client = MinimalClient()\r\n\r\n    # Send a request with the first two command line arguments\r\n    if len(sys.argv) < 3:\r\n        print(\'Usage: ros2 run my_robot_tutorials client_member_function <int1> <int2>\')\r\n        return\r\n\r\n    response = minimal_client.send_request(int(sys.argv[1]), int(sys.argv[2]))\r\n\r\n    # Log the result\r\n    minimal_client.get_logger().info(f\'Result of add_two_ints: {response.sum}\')\r\n\r\n    # Clean up when done\r\n    minimal_client.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == \'__main__\':\r\n    main()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"actions-in-ros-2",children:"Actions in ROS 2"}),"\n",(0,t.jsx)(n.p,{children:"Actions are used for goal-oriented communication that may take a long time to complete. They provide feedback during execution and can be canceled."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"Action Communication Pattern",src:i(2257).A+"",width:"800",height:"400"})}),"\n",(0,t.jsx)(n.h3,{id:"action-structure",children:"Action Structure"}),"\n",(0,t.jsx)(n.p,{children:"An action has three parts:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Goal"}),": The objective to be reached"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Feedback"}),": Status updates during execution"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Result"}),": The final outcome"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"The diagram above illustrates how actions work. The client sends a goal to the action server, which provides feedback during execution. The client can also cancel the goal if needed, and eventually receives the result when the action completes."}),"\n",(0,t.jsx)(n.h3,{id:"creating-an-action",children:"Creating an Action"}),"\n",(0,t.jsxs)(n.p,{children:["Define the action interface in a ",(0,t.jsx)(n.code,{children:".action"})," file:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"# Fibonacci.action\r\nint32 order\r\n---\r\nint32[] sequence\r\n---\r\nint32[] partial_sequence\n"})}),"\n",(0,t.jsx)(n.h2,{id:"parameters-in-ros-2",children:"Parameters in ROS 2"}),"\n",(0,t.jsx)(n.p,{children:"Parameters allow nodes to be configured at runtime. They can be set at launch time or changed dynamically."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\n\r\n\r\nclass ParameterNode(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('parameter_node')\r\n        \r\n        # Declare parameters with default values\r\n        self.declare_parameter('robot_name', 'default_robot')\r\n        self.declare_parameter('max_velocity', 1.0)\r\n        \r\n        # Get parameter values\r\n        self.robot_name = self.get_parameter('robot_name').value\r\n        self.max_velocity = self.get_parameter('max_velocity').value\r\n        \r\n        self.get_logger().info(f'Robot: {self.robot_name}, Max velocity: {self.max_velocity}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = ParameterNode()\r\n    rclpy.spin(node)\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"launch-files",children:"Launch Files"}),"\n",(0,t.jsx)(n.p,{children:"Launch files allow you to start multiple nodes with a single command and specify their configuration."}),"\n",(0,t.jsx)(n.h3,{id:"creating-a-launch-file",children:"Creating a Launch File"}),"\n",(0,t.jsxs)(n.p,{children:["Create ",(0,t.jsx)(n.code,{children:"robot_launch.py"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\n\r\ndef generate_launch_description():\r\n    return LaunchDescription([\r\n        Node(\r\n            package='my_robot_tutorials',\r\n            executable='publisher_member_function',\r\n            name='talker',\r\n            parameters=[\r\n                {'param_name': 'param_value'}\r\n            ],\r\n            remappings=[\r\n                ('/original_topic_name', '/new_topic_name')\r\n            ]\r\n        ),\r\n        Node(\r\n            package='my_robot_tutorials',\r\n            executable='subscriber_member_function',\r\n            name='listener'\r\n        )\r\n    ])\n"})}),"\n",(0,t.jsx)(n.h2,{id:"debugging-ros-2-systems",children:"Debugging ROS 2 Systems"}),"\n",(0,t.jsx)(n.h3,{id:"ros-2-command-line-tools",children:"ROS 2 Command Line Tools"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 node list"}),": List all active nodes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 node info <node_name>"}),": Get detailed information about a node"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 topic list"}),": List all active topics"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 topic echo <topic_name>"}),": Print messages from a topic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 service list"}),": List all available services"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"ros2 action list"}),": List all available actions"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"visualization-tools",children:"Visualization Tools"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RViz2"}),": 3D visualization for robot sensors and state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"rqt"}),": Graphical user interface for ROS tools"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ros2 bag"}),": Recording and playback of topic data"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"practical-application",children:"Practical Application"}),"\n",(0,t.jsx)(n.p,{children:"In robotics, advanced ROS 2 concepts are used for:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Navigation and path planning (using actions)"}),"\n",(0,t.jsx)(n.li,{children:"Sensor fusion (using services and parameters)"}),"\n",(0,t.jsx)(n.li,{children:"Multi-robot coordination (complex topic architectures)"}),"\n",(0,t.jsx)(n.li,{children:"Dynamic reconfiguration (parameters)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"lab-exercise-preview",children:"Lab Exercise Preview"}),"\n",(0,t.jsx)(n.p,{children:"In the next section, you'll find the detailed instructions for the advanced ROS 2 lab, where you'll implement a complete robotic system using services, actions, and parameters."}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"In this week, you've learned:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"How to implement service-server communication"}),"\n",(0,t.jsx)(n.li,{children:"How to use actions for goal-oriented tasks"}),"\n",(0,t.jsx)(n.li,{children:"How to manage parameters in ROS 2 systems"}),"\n",(0,t.jsx)(n.li,{children:"How to coordinate nodes with launch files"}),"\n",(0,t.jsx)(n.li,{children:"Techniques for debugging complex systems"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"navigation-1",children:"Navigation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"/ros2/week1-2",children:"\u2190 Previous: Week 1-2: ROS 2 Architecture"})," | ",(0,t.jsx)(n.a,{href:"/ros2/conclusion",children:"Next: ROS 2 Module Conclusion"})," | ",(0,t.jsx)(n.a,{href:"/ros2/intro",children:"Module Home"})]}),"\n",(0,t.jsxs)(n.p,{children:["You've completed the ROS 2 module! Continue to the ",(0,t.jsx)(n.a,{href:"/intro",children:"Course Introduction"})," to explore other modules as they become available."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>l});var r=i(6540);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);