"use strict";(globalThis.webpackChunkmy_website=globalThis.webpackChunkmy_website||[]).push([[7266],{7506:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"ros2/lab-exercises/lab1","title":"Lab Exercise 1 - Basic Node Communication","description":"Objective","source":"@site/docs/ros2/lab-exercises/lab1.md","sourceDirName":"ros2/lab-exercises","slug":"/ros2/lab-exercises/lab1","permalink":"/my-website/ros2/lab-exercises/lab1","draft":false,"unlisted":false,"editUrl":"https://github.com/Bushraturk/my-website/edit/main/docs/docs/ros2/lab-exercises/lab1.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Lab Exercise 1 - Basic Node Communication","sidebar_position":1},"sidebar":"textbookSidebar","previous":{"title":"Week 3 - Advanced ROS 2 Concepts","permalink":"/my-website/ros2/week3"},"next":{"title":"Lab Exercise 2 - Services and Actions in ROS 2","permalink":"/my-website/ros2/lab-exercises/lab2"}}');var i=s(4848),l=s(8453);const t={title:"Lab Exercise 1 - Basic Node Communication",sidebar_position:1},a="Lab Exercise 1: Basic Node Communication in ROS 2",c={},o=[{value:"Objective",id:"objective",level:2},{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Equipment Required",id:"equipment-required",level:2},{value:"Lab Steps",id:"lab-steps",level:2},{value:"Step 1: Create a ROS 2 Package",id:"step-1-create-a-ros-2-package",level:3},{value:"Step 2: Create the Publisher Node",id:"step-2-create-the-publisher-node",level:3},{value:"Step 3: Create the Subscriber Node",id:"step-3-create-the-subscriber-node",level:3},{value:"Step 4: Make Scripts Executable and Configure Setup",id:"step-4-make-scripts-executable-and-configure-setup",level:3},{value:"Step 5: Build and Test Your Package",id:"step-5-build-and-test-your-package",level:3},{value:"Step 6: Run Your Publisher-Subscriber System",id:"step-6-run-your-publisher-subscriber-system",level:3},{value:"Step 7: Explore with ROS 2 Tools",id:"step-7-explore-with-ros-2-tools",level:3},{value:"Expected Results",id:"expected-results",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Extension Activities",id:"extension-activities",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Summary",id:"summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"lab-exercise-1-basic-node-communication-in-ros-2",children:"Lab Exercise 1: Basic Node Communication in ROS 2"})}),"\n",(0,i.jsx)(n.h2,{id:"objective",children:"Objective"}),"\n",(0,i.jsx)(n.p,{children:"In this lab exercise, you will create and run a simple publisher-subscriber system in ROS 2 to understand the fundamental concepts of node communication."}),"\n",(0,i.jsx)(n.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,i.jsx)(n.p,{children:"After completing this lab, you will be able to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Create a ROS 2 package for your project"}),"\n",(0,i.jsx)(n.li,{children:"Implement a publisher node that sends custom messages"}),"\n",(0,i.jsx)(n.li,{children:"Implement a subscriber node that receives and processes messages"}),"\n",(0,i.jsx)(n.li,{children:"Launch and test your publisher-subscriber system"}),"\n",(0,i.jsx)(n.li,{children:"Use ROS 2 command-line tools to inspect your nodes"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ROS 2 installation (Humble Hawksbill or later)"}),"\n",(0,i.jsx)(n.li,{children:"Basic Python programming knowledge"}),"\n",(0,i.jsx)(n.li,{children:"Understanding of ROS 2 concepts (covered in Week 1-2 content)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"equipment-required",children:"Equipment Required"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Computer with ROS 2 installed"}),"\n",(0,i.jsx)(n.li,{children:"Terminal/shell access"}),"\n",(0,i.jsx)(n.li,{children:"Text editor or IDE"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"lab-steps",children:"Lab Steps"}),"\n",(0,i.jsx)(n.h3,{id:"step-1-create-a-ros-2-package",children:"Step 1: Create a ROS 2 Package"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create a new workspace directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws/src\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a new ROS 2 package called ",(0,i.jsx)(n.code,{children:"robot_basics_lab"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python robot_basics_lab\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Navigate to the package directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd robot_basics_lab\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-2-create-the-publisher-node",children:"Step 2: Create the Publisher Node"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Create a directory for your Python scripts:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir robot_basics_lab\r\ncd robot_basics_lab\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create a file called ",(0,i.jsx)(n.code,{children:"talker.py"})," with the following content:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass TalkerNode(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('talker')\r\n        self.publisher_ = self.create_publisher(String, 'chatter', 10)\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello World: {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n        self.i += 1\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    talker = TalkerNode()\r\n    rclpy.spin(talker)\r\n    talker.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-3-create-the-subscriber-node",children:"Step 3: Create the Subscriber Node"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Create a file called ",(0,i.jsx)(n.code,{children:"listener.py"})," with the following content:","\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass ListenerNode(Node):\r\n\r\n    def __init__(self):\r\n        super().__init__('listener')\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'chatter',\r\n            self.listener_callback,\r\n            10)\r\n        self.subscription  # prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    listener = ListenerNode()\r\n    rclpy.spin(listener)\r\n    listener.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-4-make-scripts-executable-and-configure-setup",children:"Step 4: Make Scripts Executable and Configure Setup"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Go back to the package root:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src/robot_basics_lab\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Make the Python files executable:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chmod +x robot_basics_lab/talker.py\r\nchmod +x robot_basics_lab/listener.py\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Edit the ",(0,i.jsx)(n.code,{children:"setup.py"})," file to add entry points for your scripts:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import os\r\nfrom glob import glob\r\nfrom setuptools import setup\r\n\r\npackage_name = 'robot_basics_lab'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.0',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='your.email@example.com',\r\n    description='Robot Basics Lab for ROS 2',\r\n    license='TODO: License declaration',\r\n    tests_require=['pytest'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'talker = robot_basics_lab.talker:main',\r\n            'listener = robot_basics_lab.listener:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-5-build-and-test-your-package",children:"Step 5: Build and Test Your Package"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Go to your workspace root directory:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build your package:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"colcon build --packages-select robot_basics_lab\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Source the setup file:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"source install/setup.bash\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-6-run-your-publisher-subscriber-system",children:"Step 6: Run Your Publisher-Subscriber System"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In one terminal, run the publisher:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_basics_lab talker\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In another terminal (remember to source setup again), run the subscriber:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_basics_lab listener\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Observe the messages being published and received."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"step-7-explore-with-ros-2-tools",children:"Step 7: Explore with ROS 2 Tools"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In a third terminal, list active nodes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 node list\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Check the topics being used:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Echo the chatter topic to see the messages:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /chatter\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"expected-results",children:"Expected Results"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:['The talker node should publish "Hello World" messages to the ',(0,i.jsx)(n.code,{children:"/chatter"})," topic every 0.5 seconds"]}),"\n",(0,i.jsx)(n.li,{children:"The listener node should receive and print these messages to the terminal"}),"\n",(0,i.jsx)(n.li,{children:"You should be able to use ROS 2 tools to inspect the nodes and topics in your system"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'If you get "command not found" errors, ensure ROS 2 is sourced in your terminal'}),"\n",(0,i.jsx)(n.li,{children:"If nodes can't communicate, check that they're on the same ROS_DOMAIN_ID"}),"\n",(0,i.jsx)(n.li,{children:"If the build fails, check that all dependencies are properly declared in your package.xml"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"extension-activities",children:"Extension Activities"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Modify the publisher to send different types of messages (integers, floats)"}),"\n",(0,i.jsx)(n.li,{children:"Add a second publisher or subscriber to your system"}),"\n",(0,i.jsx)(n.li,{children:"Experiment with different Quality of Service (QoS) settings"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["What is the purpose of the ",(0,i.jsx)(n.code,{children:"create_publisher"})," method?"]}),"\n",(0,i.jsx)(n.li,{children:"How does the timer callback work in the publisher node?"}),"\n",(0,i.jsxs)(n.li,{children:["Why do we need to call ",(0,i.jsx)(n.code,{children:"rclpy.spin()"})," in the main function?"]}),"\n",(0,i.jsx)(n.li,{children:"What would happen if you changed the timer period to 2 seconds?"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsx)(n.p,{children:"This lab introduced you to creating basic ROS 2 nodes for communication. You've successfully implemented a publisher-subscriber pattern, which is one of the fundamental communication methods in ROS 2."})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var r=s(6540);const i={},l=r.createContext(i);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);